@using Microsoft.AspNet.Identity
@model ConnectIn.Models.ViewModels.GroupDetailViewModel

@{
    ViewBag.Title = "GroupDetails";
}

<h1 style="text-align: center;">@Model.Name</h1>

<div class="well" id="membersDiv" style="display: inline-block; OVERFLOW-Y: scroll; WIDTH: 72%; HEIGHT: 262px;">
    <table class="table table-striped">
        <thead>
            <caption style="float: left; font-weight: bold;">
                <h2>Members:</h2>
            </caption>
            <tr>
                <th>Name</th>
                <th>Birthday:</th>
                <th>Username:</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var member in Model.Members)
            {
                <tr>
                    <td>@Html.ActionLink(member.Name, "GetUser", new {Id = member.UserId})</td>
                    <td>@member.Birthday</td>
                    <td>@member.UserName</td>
                </tr>
            }
        </tbody>
    </table>
</div>


<span class="well" style="display: inline-block; float: right; width: 25%">
    <h4>Add friends to group</h4>
    @using (Html.BeginForm("AddFriend", "Group"))
    {
        <div style="OVERFLOW-Y: scroll; WIDTH: 100%; HEIGHT: 150px;">
        
            @foreach (var id in Model.FriendsOfUser)
            {
                <div class="checkbox">
                    <label><input type="checkbox" value="@id.UserId" name="newFriendsInGroup">@id.Name</label>
                 </div>
            }
        
        </div>
        <input type="hidden" name="idOfGroup" value="@Model.GroupId"/>
        <button type="submit" id="addfriendstogroup" class="btn btn-success"><span class="glyphicon glyphicon-plus"></span>Add to group</button>
    }
</span>

<div>
    @using (Html.BeginForm("AddPost", "Status"))
    {
        <div class="form-horizontal">
            <!--Notifies the StatusController that the post comes from a Group:-->
            <input type="hidden" name="location" value="group" />
            <input type="hidden" name="idOfGroup" value="@Model.GroupId"/>
            <div class="PostPartialViewPhoto">
                <img class="PartialViewResponsive img-rounded" src="@Url.Content(Model.User.ProfilePicture)" alt="Profile Picture"/>
            </div>
            <textarea placeholder="Share something with your group" class="form-control" rows="5" id="newsfeedstatus" name="status" ></textarea>
            <button type="submit" id="submitstatus" class="btn btn-primary" style="margin: 10px;">Submit</button>
        </div>
        @Html.ValidationSummary(false)
    }
</div>

<hr />

@{
    Html.RenderPartial("~/Views/Home/PostsPartial.cshtml", Model.Posts);
}


<p>
    @if (User.Identity.GetUserId() == Model.AdminId)
    {
        using(Html.BeginForm("Edit", "Group"))
         {
            <input type="hidden" name="groupID" value="@Model.GroupId"/>
            <button type="submit" id="submitgroupId" class="btn btn-warning" style="display: inline;">Edit group</button>
         }
        <span>&nbsp;&nbsp; | &nbsp;&nbsp;</span>
    }
    @Html.ActionLink("Back to List", "GroupsList")
</p>
