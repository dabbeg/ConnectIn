@using Microsoft.AspNet.Identity
@model ConnectIn.Models.ViewModels.GroupDetailViewModel

@{
    ViewBag.Title = "GroupDetails";
}

<h1 style="text-align: center;">@Model.Name</h1>

<div class="well" id="membersDiv" style="display: inline-block; OVERFLOW-Y: scroll; WIDTH: 72%; HEIGHT: 262px;">
    <table class="table table-striped">
        <thead>
            <caption style="float: left; font-weight: bold;">
                <h2>Members:</h2>
            </caption>
            <tr>
                <th>Name</th>
                <th>Birthday:</th>
                <th>Email:</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var member in Model.Members)
            {
                <tr>
                    <td>@Html.ActionLink(member.Name, "GetUser", new {Id = member.UserId})</td>
                    <td>@member.Birthday</td>
                    <td>@member.UserName</td>
                </tr>
            }
        </tbody>
    </table>
</div>


<span class="well" style="display: inline-block; float: right; width: 25%">
    <h4>Add friends to group</h4>
    @using (Html.BeginForm("AddFriend", "Group"))
    {
        <div style="OVERFLOW-Y: scroll; WIDTH: 100%; HEIGHT: 150px;">
        
            @foreach (var id in Model.FriendsOfUser)
            {
                <div class="checkbox">
                    <label><input type="checkbox" value="@id.UserId" name="newFriendsInGroup">@id.Name</label>
                 </div>
            }
        
        </div>
        <input type="hidden" name="idOfGroup" value="@Model.GroupId"/>
        <button type="submit" id="addfriendstogroup" class="btn btn-success"><span class="glyphicon glyphicon-plus-sign" style="position: relative; top: 2px"></span>&nbsp;Add to group</button>
    }
</span>

<div>
    <div class="form-horizontal">
        <input type="hidden" name="idOfGroup" value="@Model.GroupId" />
        <div class="PostPartialViewPhoto">
            <img class="PartialViewResponsive img-rounded" src="@Url.Content(Model.User.ProfilePicture)" alt="Profile Picture" />
        </div>
        <textarea placeholder="Share something with your group" class="form-control" rows="5" id="newsfeedstatus" name="status" ></textarea>
        <button type="submit" id="submitNewsFeedStatus" class="btn btn-primary">Share</button>
    </div>
</div>
<br/>
<br/>
<hr/>
<br/>

@{
    Html.RenderPartial("~/Views/Home/PostsPartial.cshtml", Model.Posts);
}


<span style="float: left; position: relative; left: 10px;">
    @if (User.Identity.GetUserId() == Model.AdminId)
    {
        using (Html.BeginForm("Edit", "Group"))
        {
            <input type="hidden" name="groupID" value="@Model.GroupId"/>
            <button type="submit" id="submitgroupId" class="btn btn-warning" style="display: inline;">Edit group</button>
        }
    }
</span>
<span style="float: left">
    @using (Html.BeginForm("GroupsList", "Group"))
    {
        <button type="submit" class="btn btn-default" style="position: relative; left: 21px;">Back to list</button>
    }
</span>
<br/>
<br/>
